image: Ubuntu2004

install:
- sh: sudo uname -a
- sh: sudo apt-get update
- sh: sudo apt-get update
- sh: sudo apt-get -y install python3.6 python3-pip sysprof libpango1.0-dev
- sh: sudo apt-get -y install libpango-1.0-0 libpangocairo-1.0-0
- sh: sudo apt-get -y install libglib2.0-0 libglib2.0-dev
- sh: sudo apt-get -y install python3-setuptools python3-wheel
- sh: sudo apt-get -y install libxkbcommon-dev libxrandr-dev libxrender-dev
- sh: sudo apt-get -y install libxi-dev libxdamage-dev libxfixes-dev
- sh: sudo apt-get -y install libxext-dev libxcursor-dev libfontconfig-dev
- sh: sudo apt-get -y install libx11-dev libwayland-dev libpng-dev
- sh: sudo apt-get -y install libgles2-mesa-dev libglfw3-dev libglfw3
- sh: sudo apt-get -y install libglew-dev libc6-dev
- sh: sudo apt-get -y install libpng++-dev libpng-dev libpng16-16 
- sh: sudo apt-get -y install libjpeg-dev libjpeg62 libjpeg8 libjpeg8-dev
- sh: sudo apt-get -y install libspectre-dev libspectre1
- sh: sudo apt-get -y install librsvg2-2 librsvg2-dev
- sh: sudo apt-get -y install libpixman-1-0 libpixman-1-dev
- sh: sudo apt-get -y install libxcb-shm0 libxcb-shm0-dev
- sh: sudo apt-get -y install cairo-5c
- sh: sudo apt-get -y install libicu-dev libthai-dev
- sh: sudo apt-get -y install libvulkan-dev libvulkan1
- sh: sudo apt-get -y install libgdk-pixbuf2.0-0 libgdk-pixbuf2.0-dev
- sh: sudo apt-get -y install ffmpeg libatk1.0-dev libglm-dev iso-codes
- sh: sudo apt-get -y install libgraphene-1.0-dev libgraphene-1.0-0 
- sh: sudo apt-get -y install sassc hicolor-icon-theme libglib2.0-0
- sh: sudo apt-get -y install libglib2.0-dev pkg-config bison gettext
- sh: sudo python3 -m pip install meson
- sh: sudo python3 -m pip install ninja
- sh: sudo python3 -m pip install cmake
- sh: sudo mkdir build
- sh: sudo mkdir build/gtk4
- sh: sudo mkdir build/glib2
- sh: sudo mkdir build/pango
- sh: sudo mkdir build/vulkan
- sh: sudo git clone https://github.com/KhronosGroup/Vulkan-Headers.git build/vulkan
- sh: sudo git --work-tree=build/vulkan --git-dir=build/vulkan/.git checkout tags/v1.2.179 -b v1.2.179
- sh: sudo mkdir build/vulkan/_build
- sh: sudo cmake build/vulkan -B build/vulkan/_build -DCMAKE_INSTALL_PREFIX=/usr
- sh: sudo cmake --build build/vulkan/_build --target install
- sh: sudo rm -fr build/vulkan
- sh: sudo mkdir build/vulkan
- sh: sudo git clone https://github.com/KhronosGroup/Vulkan-Loader.git build/vulkan
- sh: sudo git --work-tree=build/vulkan --git-dir=build/vulkan/.git checkout tags/v1.2.179 -b v1.2.179
- sh: sudo mkdir build/vulkan/_build
- sh: sudo cmake build/vulkan -B build/vulkan/_build -DCMAKE_INSTALL_PREFIX=/usr
- sh: sudo cmake --build build/vulkan/_build --target install
- sh: sudo git clone https://github.com/GNOME/glib.git build/glib2
- sh: sudo git --work-tree=build/glib2 --git-dir=build/glib2/.git checkout tags/2.68.3 -b 2.68.3
- sh: sudo mkdir build/glib2/_build
- sh: sudo meson -Dprefix=/usr build/glib2/_build build/glib2
- sh: sudo ninja -C build/glib2/_build -j 1
- sh: sudo ninja -C build/glib2/_build install
- sh: sudo git clone https://github.com/GNOME/pango.git build/pango
- sh: sudo git --work-tree=build/pango --git-dir=build/pango/.git checkout tags/1.48.7 -b 1.48.7
- sh: sudo mkdir build/pango/_build
- sh: sudo meson -Dprefix=/usr build/pango/_build build/pango
- sh: sudo ninja -C build/pango/_build -j 1
- sh: sudo ninja -C build/pango/_build install
- sh: sudo git clone https://github.com/GNOME/gtk.git build/gtk4
- sh: sudo git --work-tree=build/gtk4 --git-dir=build/gtk4/.git checkout tags/4.0 -b 4.0
- sh: sudo mkdir build/gtk4/_build
- sh: sudo meson -Dprefix=/usr -Dvulkan=enabled -Dwayland-backend=false -Dbroadway-backend=false -Dprint-backends=none -Dman-pages=false -Dgtk_doc=false -Ddemos=false -Dmedia=ffmpeg -Dbuild-examples=false -Dbuild-tests=false -Dinstall-tests=false build/gtk4/_build build/gtk4
- sh: sudo ninja -C build/gtk4/_build -j 1
- sh: sudo apt-get -y install mathgl
- sh: sudo apt-get -y install libopenal-dev
- sh: sudo apt-get -y install librtmidi-dev
- sh: sudo chmod 777 gradlew

build_script:
- gradlew assemble